---
import { t, changeLanguage, setDefaultNamespace } from 'i18next';
import Block from '../components/grid/Block.astro';
import { Prepr } from 'src/utils/prepr';
import GetReportings from 'src/queries/get-reportings';
import Grid from '../layouts/Grid.astro';

changeLanguage('uk');

setDefaultNamespace('reportings');
const response = await Prepr(GetReportings());
const { data } = await response.json();
const reportings = data.Reportings.items;
---

<Grid title={t('title')} description={t('description')}>
  <!-- Grid elements -->
  <Block md lg />
  <Block md lg />
  <Block md lg />
  <Block md lg />
  <Block md lg />
  <Block md lg />
  <Block lg />
  <div class='col-span-2 bg-white p-5 md:col-span-4 lg:col-span-6'>
    <h1 class='text-center text-4xl font-bold'>{t('title')}</h1>
    {
      reportings.map((e: any) => (
        <div class='my-5'>
          <h2 class='text-center text-3xl font-bold'>{e.year}</h2>
          <div class='mt-3 grid grid-cols-1 gap-5 md:grid-cols-2'>
            <a
              href={e.finance.url}
              title={`${t('finance')} ${e.year}${t('year')}`}
              target='_blank'
              class='flex flex-row items-center gap-3 rounded-md bg-slate-100 duration-300 hover:bg-slate-200'
            >
              <div class='rounded-md px-5 py-3'>
                <div class='flex items-center justify-center rounded-full bg-slate-300 p-2'>
                  <img
                    src='/icons/pdf.svg'
                    alt={`${t('finance')} ${e.year} PDF`}
                    title='PDF'
                    width='32'
                    height='32'
                  />
                </div>
              </div>
              <p class='text-xl'>{t('finance')}</p>
            </a>
            <a
              href={e.auditory.url}
              title={`${t('auditory')} ${e.year}${t('year')}`}
              target='_blank'
              class='flex flex-row items-center gap-3 rounded-md bg-slate-100 duration-300 hover:bg-slate-200'
            >
              <div class='rounded-md px-5 py-3'>
                <div class='flex items-center justify-center rounded-full bg-slate-300 p-2'>
                  <img
                    src='/icons/pdf.svg'
                    alt={`${t('auditory')} ${e.year} PDF`}
                    title='PDF'
                    width='32'
                    height='32'
                  />
                </div>
              </div>
              <p class='text-xl'>{t('auditory')}</p>
            </a>
          </div>
        </div>
      ))
    }
  </div>
</Grid>
